<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./app.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>InstaDL</title>
</head>

<body>

    <h1 class="title">Instagram Pictures Downloader <small>using JavaScript</small></h1>
yo!<br>
<p id="out"></p>
<textarea id="in"></textarea>
<button  id="but" onclick="add()">hellloooooooooo brooooo</button>
<p>Click "Try it" to call a function with arguments</p>

<script>
async function retrieve(url) {
     let urls = url.split("?")
     let response = await axios.get(urls[0]+"?__a=1")
     let ret;
     if (response.data["graphql"]["shortcode_media"]["is_video"]) {
         ret = response.data["graphql"]["shortcode_media"]["video_url"];
     } else {
         ret = response.data["graphql"]["shortcode_media"]["display_url"];
     };
     return ret;
}
async function add() {
	let inp = document.getElementById('in').value;
    document.getElementById('out').innerHTML = await retrieve(inp);
}
</script>
</body>
</html>
